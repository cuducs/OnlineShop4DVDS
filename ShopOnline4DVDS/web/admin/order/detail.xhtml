<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jsp/jstl/core">
    <ui:insert name="top">
        <ui:include src="../template/top.xhtml"/>
    </ui:insert>
    <script type="text/javascript" src="http://jqueryjs.googlecode.com/files/jquery-1.3.1.min.js" > </script> 
<script type="text/javascript">

    function PrintElem(elem)
    {
        Popup($(elem).html());
    }

    function Popup(data) 
    {
        var mywindow = window.open('', 'print', 'height=400,width=600');
        mywindow.document.write('<html><head><title>Print Invoice</title>');
        /*optional stylesheet*/ //mywindow.document.write('<link rel="stylesheet" href="main.css" type="text/css" />');
        mywindow.document.write('</head><body >');
        mywindow.document.write(data);
        mywindow.document.write('</body></html>');

        mywindow.print();
        mywindow.close();

        return true;
    }

</script>
    <title>DVD Store FPT Aptech C1007L_G3_S4</title>
    <body>
        <div id="main_container">
            <ui:insert name="welcome">
                <ui:include src="../template/welcome.xhtml"/>
            </ui:insert>
            <div class="main_content">
                <ui:insert name="vmenu">
                    <ui:include src="../template/hmenu.xhtml"/>
                </ui:insert>
                <div class="center_content">  
                    <ui:insert name="vmenu">
                        <ui:include src="../template/vmenu.xhtml"/>
                    </ui:insert>
                    <div class="right_content"> 
                        <!---Mọi người viết nội dung vào trong DIV này nhé: Nếu không hiển thị được CSS thì đừng lo, các bác cứ ném nó vào thư mục của mình là OK, vì nó trỏ sai folder thôi.-->

                        <c:if test="#{sessionScope.currentSort==null}">
                            #{facesContext.externalContext.redirect("order.xhtml")}
                        </c:if>
                        <c:if test="#{sessionScope.currentSort==2}">
                            <h2> 

                                <b>Invoice</b> 
                            </h2> -- <h1><a href="#" onclick="PrintElem('#print')">Print Invoice</a></h1>
                        </c:if>
                        <c:if test="#{sessionScope.currentSort!=2}">
                            <h2><b>Order</b></h2>
                        </c:if>
                        <div>
                            <b>#{billBean.result}</b>
                            <h:form>
                                <table id="print">
                                    <tr>
                                        <td>ID: </td><td>#{billBean.detail.id}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Order date: </td><td>#{billBean.detail.orderDate.toLocaleString()}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Total: </td><td>#{billBean.detail.total}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Status: </td><td>
                                            <c:if test="#{billBean.detail.status==0}">
                                                Canceled
                                            </c:if>
                                            <c:if test="#{billBean.detail.status==1}">
                                                Waiting
                                            </c:if>
                                            <c:if test="#{billBean.detail.status ==2}">
                                                Done
                                            </c:if>
                                            <br/>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>Name: </td><td>#{billBean.detail.customerName}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Address: </td><td>#{billBean.detail.deliveryAddress}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Phone: </td><td>#{billBean.detail.phone}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Massage: </td><td>#{billBean.detail.message}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Member: </td><td>#{billBean.detail.memberId}<br/></td>
                                    </tr>
                                    <tr><th>Create date: </th><td>#{billBean.currentTime}</td></tr>
                                    <tr>
                                        <td>Price: </td><td>#{billBean.billdetail.price}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Quantity: </td><td>#{billBean.billdetail.quantity}<br/></td>
                                    </tr>
                                    <tr>
                                        <td>Product name: </td><td>#{billBean.dvddetail.title}<br/></td>
                                    </tr>
                                </table>
                                
                                <table>
                                    <tr>
                                        <th>Change Status: </th>
                                        <td>
                                            <h:selectOneMenu value="#{billBean.updateStatus}">
                                                <f:selectItem itemLabel="Cancelled" itemValue="0"/>
                                                <f:selectItem itemLabel="Waiting" itemValue="1"/>
                                                <f:selectItem itemLabel="Done" itemValue="2"/>
                                            </h:selectOneMenu>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td colspan="2"><h:commandButton value="Update" action="#{billBean.update()}"/></td>
                                    </tr>
                                </table>
                            </h:form>
                            <br/>
                            <a href="order.xhtml">Orders</a>
                        </div>
                    </div>         
                </div> 
                <div class="clear"></div>
            </div>
            <ui:insert name="footer">
                <ui:include src="../template/footer.xhtml"/>
            </ui:insert>
        </div>
    </body>
</html>

